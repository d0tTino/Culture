============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-8.0.2, pluggy-1.5.0 -- C:\Users\w1n51\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\w1n51\OneDrive\Desktop\Programing Projects\Culture.ai
configfile: pytest.ini
plugins: anyio-4.8.0, langsmith-0.3.42, asyncio-0.23.5, cov-4.1.0, mock-3.14.0, profiling-1.8.1, xdist-3.5.0
asyncio: mode=Mode.STRICT
created: 8/8 workers
8 workers [44 items]

scheduling tests via LoadScheduling

tests/integration/graph/test_async_agent_graph.py::test_dspy_call_timeout_in_graph 
tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_a_l1_mus_calculation 
tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_z_memory_deletion 
tests/unit/core/test_agent_state.py::test_agent_state 
tests/integration/test_hierarchical_memory_persistence.py::TestHierarchicalMemoryPersistence::test_hierarchical_memory_persistence 
tests/unit/core/test_llm_monitoring.py::test_llm_monitoring 
tests/unit/core/test_base_agent.py::test_async_select_action_intent_failsafe 
tests/integration/test_memory_usage_tracking.py::TestMemoryUsageTracking::test_retrieve_memory_ids 
[gw5] [  2%] PASSED tests/unit/core/test_agent_state.py::test_agent_state 
tests/unit/core/test_agent_state.py::test_discovery_sanity 
[gw5] [  4%] PASSED tests/unit/core/test_agent_state.py::test_discovery_sanity 
tests/unit/dspy/test_dspy_role_adherence.py::test_role_prefix_adherence 
[gw5] [  6%] PASSED tests/unit/dspy/test_dspy_role_adherence.py::test_role_prefix_adherence 
tests/unit/dspy_programs/test_action_intent_selector_fallback.py::test_action_intent_selector_failsafe 
[gw5] [  9%] PASSED tests/unit/dspy_programs/test_action_intent_selector_fallback.py::test_action_intent_selector_failsafe 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_clean_output_with_bracket_prefix 
[gw5] [ 11%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_clean_output_with_bracket_prefix 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_clean_output_without_bracket_prefix 
[gw5] [ 13%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_clean_output_without_bracket_prefix 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_initialization_with_compiled_program 
[gw5] [ 15%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_initialization_with_compiled_program 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_initialization_without_compiled_program 
[gw5] [ 18%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_initialization_without_compiled_program 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_synthesize_error_handling 
[gw5] [ 20%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_synthesize_error_handling 
tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_synthesize_success 
[gw5] [ 22%] PASSED tests/unit/dspy_programs/test_rag_context_synthesizer.py::TestRAGContextSynthesizer::test_synthesize_success 
tests/unit/dspy_programs/test_relationship_updater.py::test_failsafe_relationship_updater_returns_expected 
[gw5] [ 25%] PASSED tests/unit/dspy_programs/test_relationship_updater.py::test_failsafe_relationship_updater_returns_expected 
tests/unit/dspy_programs/test_relationship_updater.py::test_get_failsafe_output_direct 
[gw5] [ 27%] PASSED tests/unit/dspy_programs/test_relationship_updater.py::test_get_failsafe_output_direct 
tests/unit/dspy_programs/test_relationship_updater.py::test_get_relationship_updater_fallback 
[gw5] [ 29%] PASSED tests/unit/dspy_programs/test_relationship_updater.py::test_get_relationship_updater_fallback 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_extracts_keywords 
[gw5] [ 31%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_extracts_keywords 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_when_all_dspy_fails 
[gw5] [ 34%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_when_all_dspy_fails 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_without_mood 
[gw5] [ 36%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l1_template_fallback_without_mood 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l2_template_fallback_when_all_dspy_fails 
[gw5] [ 38%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l2_template_fallback_when_all_dspy_fails 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l2_template_fallback_without_optional_fields 
[gw5] [ 40%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_l2_template_fallback_without_optional_fields 
tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_normal_operation_uses_fallbacks_properly 
[gw5] [ 43%] PASSED tests/unit/dspy_programs/test_role_specific_summary_generator.py::TestRoleSpecificSummaryGeneratorFallback::test_normal_operation_uses_fallbacks_properly 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_initialization_and_collection_creation 
[gw4] [ 45%] PASSED tests/integration/test_memory_usage_tracking.py::TestMemoryUsageTracking::test_retrieve_memory_ids 
tests/test_pytest_sanity.py::test_pytest_sanity 
[gw4] [ 47%] PASSED tests/test_pytest_sanity.py::test_pytest_sanity 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_multiple_memories 
[gw6] [ 50%] FAILED tests/unit/core/test_base_agent.py::test_async_select_action_intent_failsafe 
tests/unit/core/test_base_agent.py::test_async_generate_l1_summary_failsafe 
[gw6] [ 52%] PASSED tests/unit/core/test_base_agent.py::test_async_generate_l1_summary_failsafe 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_memories 
[gw0] [ 54%] PASSED tests/integration/graph/test_async_agent_graph.py::test_dspy_call_timeout_in_graph 
tests/integration/graph/test_async_agent_graph.py::test_dspy_call_exception_in_graph 
[gw5] [ 56%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_initialization_and_collection_creation 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_single_memory 
[gw7] [ 59%] PASSED tests/unit/core/test_llm_monitoring.py::test_llm_monitoring 
tests/unit/dspy/test_dspy_direct.py::test_direct_call 
[gw7] [ 61%] PASSED tests/unit/dspy/test_dspy_direct.py::test_direct_call 
tests/unit/utils/test_async_dspy_manager.py::test_successful_execution 
[gw7] [ 63%] PASSED tests/unit/utils/test_async_dspy_manager.py::test_successful_execution 
tests/unit/utils/test_async_dspy_manager.py::test_timeout 
[gw3] [ 65%] PASSED tests/integration/test_hierarchical_memory_persistence.py::TestHierarchicalMemoryPersistence::test_hierarchical_memory_persistence 
[gw6] [ 68%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_memories 
tests/integration/test_memory_usage_tracking.py::TestMemoryUsageTracking::test_memory_usage_tracking 
[gw7] [ 70%] PASSED tests/unit/utils/test_async_dspy_manager.py::test_timeout 
tests/unit/utils/test_async_dspy_manager.py::test_execution_error 
[gw7] [ 72%] PASSED tests/unit/utils/test_async_dspy_manager.py::test_execution_error 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_collection 
[gw4] [ 75%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_multiple_memories 
tests/unit/memory/test_weaviate_vector_store_manager.py::test_query_empty_collection 
[gw0] [ 77%] PASSED tests/integration/graph/test_async_agent_graph.py::test_dspy_call_exception_in_graph 
tests/unit/test_summary_generators.py::test_l1_summary_generator_failsafe 
[gw0] [ 79%] PASSED tests/unit/test_summary_generators.py::test_l1_summary_generator_failsafe 
[gw3] [ 81%] PASSED tests/integration/test_memory_usage_tracking.py::TestMemoryUsageTracking::test_memory_usage_tracking 
[gw5] [ 84%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_single_memory 
tests/unit/test_summary_generators.py::test_l2_summary_generator_failsafe 
[gw5] [ 86%] PASSED tests/unit/test_summary_generators.py::test_l2_summary_generator_failsafe 
[gw2] [ 88%] PASSED tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_z_memory_deletion 
tests/integration/memory/test_memory_utility_score.py::TestMemoryUtilityScore::test_memory_utility_score_calculation 
[gw1] [ 90%] PASSED tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_a_l1_mus_calculation 
tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_b_l2_mus_calculation 
[gw2] [ 93%] PASSED tests/integration/memory/test_memory_utility_score.py::TestMemoryUtilityScore::test_memory_utility_score_calculation 
[gw6] [ 95%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_collection 
[gw4] [ 97%] PASSED tests/unit/memory/test_weaviate_vector_store_manager.py::test_query_empty_collection 
[gw1] [100%] PASSED tests/integration/memory/test_memory_pruning_mus.py::TestMUSBasedMemoryPruning::test_b_l2_mus_calculation 

================================== FAILURES ===================================
__________________ test_async_select_action_intent_failsafe ___________________
[gw6] win32 -- Python 3.11.9 C:\Users\w1n51\AppData\Local\Programs\Python\Python311\python.exe
tests\unit\core\test_base_agent.py:14: in test_async_select_action_intent_failsafe
    result = await agent.async_select_action_intent("role", "context", "goal", ["idle"])
src\agents\core\base_agent.py:444: in async_select_action_intent
    default_value=selector.get_failsafe_output(agent_role, current_situation, agent_goal, available_actions),
E   AttributeError: 'function' object has no attribute 'get_failsafe_output'
------------------------------ Captured log call ------------------------------
[32mINFO    [0m sentence_transformers.SentenceTransformer:SentenceTransformer.py:106 Load pretrained SentenceTransformer: all-MiniLM-L6-v2
[33mWARNING [0m src.agents.dspy_programs.action_intent_selector:action_intent_selector.py:109 ACTION SELECTOR: Using basic (unoptimized) selector as fallback
============================== warnings summary ===============================
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076
  C:\Users\w1n51\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\fields.py:1076: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'required'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warn(

..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28
  C:\Users\w1n51\AppData\Local\Programs\Python\Python311\Lib\site-packages\discord\player.py:28: DeprecationWarning: 'audioop' is deprecated and slated for removal in Python 3.13
    import audioop

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6128, family=2, type=1, proto=0, laddr=('127.0.0.1', 51169), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=5236, family=2, type=1, proto=0, laddr=('127.0.0.1', 51170), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6056, family=2, type=1, proto=0, laddr=('127.0.0.1', 51171), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6096, family=2, type=1, proto=0, laddr=('127.0.0.1', 51173), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6100, family=2, type=1, proto=0, laddr=('127.0.0.1', 51174), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=5972, family=2, type=1, proto=0, laddr=('127.0.0.1', 51175), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6052, family=2, type=1, proto=0, laddr=('127.0.0.1', 51177), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

<frozen importlib._bootstrap_external>:729
  <frozen importlib._bootstrap_external>:729: ResourceWarning: unclosed <socket.socket fd=6136, family=2, type=1, proto=0, laddr=('127.0.0.1', 51176), raddr=('127.0.0.1', 11434)>
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/unit/memory/test_weaviate_vector_store_manager.py::test_initialization_and_collection_creation
tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_memories
tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_multiple_memories
tests/unit/memory/test_weaviate_vector_store_manager.py::test_add_and_query_single_memory
tests/unit/memory/test_weaviate_vector_store_manager.py::test_delete_collection
tests/unit/memory/test_weaviate_vector_store_manager.py::test_query_empty_collection
  C:\Users\w1n51\AppData\Local\Programs\Python\Python311\Lib\site-packages\weaviate\collections\classes\config.py:1963: PydanticDeprecatedSince211: Accessing the 'model_fields' attribute on the instance is deprecated. Instead, you should access this attribute from the model class. Deprecated in Pydantic V2.11 to be removed in V3.0.
    for cls_field in self.model_fields:

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/unit/core/test_base_agent.py::test_async_select_action_intent_failsafe
================= 1 failed, 43 passed, 30 warnings in 37.34s ==================
